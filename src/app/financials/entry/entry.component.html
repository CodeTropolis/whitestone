<div *ngIf="category && showView">
    <mat-card>

        <form *ngIf="formGroup" [formGroup]="formGroup" #formDirective="ngForm" (ngSubmit)="submitHandler(formDirective)">

            <div *ngIf="!costExists; else altInput">
                <h4>Please enter a starting amount for {{category.val}}.</h4>
                <mat-form-field>
                    <input type=number step=0.01 matInput placeholder="{{category.val}} Cost" formControlName="{{costKey}}">
                </mat-form-field>
            </div>


            <ng-template #altInput>
                    <h4> {{category.val}} Balance: {{balance | currency}} <button (click) ="history(category)">History</button></h4>
                <mat-form-field>
                    <input *ngIf="category.val === 'Tuition'" type=number step=0.01 matInput placeholder="{{category.val}} Payment" formControlName="{{paymentKey}}">
                    <input *ngIf="category.val !== 'Tuition'" type=number step=0.01 matInput placeholder="{{category.val}} Credit" formControlName="{{paymentKey}}">
                </mat-form-field>

                <mat-form-field *ngIf="category.val !== 'Tuition'">
                    <input type =number step=0.01 matInput placeholder="{{category.val}} Deduction" formControlName="{{deductionKey}}">
                </mat-form-field>
            </ng-template>

            <button [disabled]="!formGroup.valid" type="submit">Submit</button>
        </form>

       <div *ngIf="hasHistory">
            <ul *ngFor = "let payment of payments">
                <li>{{payment.payment | currency}} | Date: {{payment.date}}</li>
            </ul>
       </div>

    </mat-card>
    <!-- <pre>Category: {{category.val}} | Cost key: {{costKey}} | costExists: {{cost}}</pre> -->
</div>