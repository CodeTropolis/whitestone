<!-- History Table | Current finanical doc: {{currentFinancialDoc.ref.id}} -->
<h4 *ngIf="currentCategory"  class="heading"> {{currentChild.fname}} {{currentChild.lname}}'s {{currentCategory.val}} History</h4>
<mat-table *ngIf="tableData && currentCategory" [dataSource]="tableData" matSort>
  <ng-container matColumnDef="amount">
    <mat-header-cell *matHeaderCellDef mat-sort-header>Amount</mat-header-cell>
    <mat-cell *matCellDef="let row">
      <span [class.deduction]="row.type === 'Deduction'"> {{row.amount | currency}}</span>
    </mat-cell>
  </ng-container>

  <ng-container matColumnDef="type">
    <mat-header-cell *matHeaderCellDef mat-sort-header>Type</mat-header-cell>
    <mat-cell *matCellDef="let row">
      <span [class.deduction]="row.type === 'Deduction'">{{row.type}}</span>
    </mat-cell>
  </ng-container>

  <ng-container matColumnDef="date">
    <mat-header-cell *matHeaderCellDef mat-sort-header>Date</mat-header-cell>
    <mat-cell *matCellDef="let row"> {{row.date | date:"medium"}} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="memo">
    <mat-header-cell *matHeaderCellDef mat-sort-header>Memo</mat-header-cell>
    <mat-cell *matCellDef="let row"> {{row.memo}} </mat-cell>
  </ng-container>

  <ng-container *ngIf="userIsAdmin" matColumnDef="delete">
    <mat-header-cell *matHeaderCellDef mat-sort-header>Delete Transaction</mat-header-cell>
    <mat-cell *matCellDef="let row">
      <button [disabled]="disableDelete[row.id]" (click)="deleteTransaction(row.id, row.type, row.amount)">Delete</button>
      <!-- ToDo: Add confirm delete -->
    </mat-cell>
  </ng-container>

  <mat-header-row *matHeaderRowDef="tableColumns"></mat-header-row>
  <mat-row *matRowDef="let row; columns: tableColumns;"></mat-row>
</mat-table>